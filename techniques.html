<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>macOS/Zsh Commands - System Diagnostics</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Navigation -->
    <nav>
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="gallery.html">Windows CMD</a></li>
            <li><a href="techniques.html" class="active">macOS/Zsh</a></li>
            <li><a href="equipment.html">Cheatsheet</a></li>
        </ul>
    </nav>

    <!-- Header -->
    <header>
        <h1>macOS / Zsh Commands</h1>
        <p class="tagline">System diagnostics, network tools, and utilities for macOS</p>
    </header>

    <!-- Main Content -->
    <main>
        <section class="intro">
            <h2>macOS Terminal & Zsh Reference</h2>
            <p>Copy and paste these commands directly into Terminal.app or iTerm2.
            Last tested on <time datetime="2024-01-15">January 15, 2024</time> on macOS Sonoma 14.2.</p>
        </section>

        <!-- System Information Commands -->
        <section class="command-category">
            <h2>System Information & Diagnostics</h2>

            <article class="command-block">
                <h3>macOS Version</h3>
                <pre><code>sw_vers</code></pre>
                <p>Shows macOS version, build number. Execution time: <data value="10">10ms</data></p>

                <h3>Detailed System Info</h3>
                <pre><code>system_profiler SPSoftwareDataType SPHardwareDataType</code></pre>
                <p>Hardware and software overview.</p>

                <h3>CPU Information</h3>
                <pre><code>sysctl -n machdep.cpu.brand_string && sysctl hw.ncpu hw.physicalcpu</code></pre>
                <p>Shows processor model and core count.</p>

                <h3>Memory Information</h3>
                <pre><code>vm_stat | perl -ne '/page size of (\d+)/ and $size=$1; /Pages\s+([^:]+)[^\d]+(\d+)/ and printf("%-16s % 16.2f Mi\n", "$1:", $2 * $size / 1048576);'</code></pre>
                <p>Displays memory usage in MB. Calculation: <math><mfrac><mrow><mi>pages</mi><mo>×</mo><mi>pagesize</mi></mrow><msup><mn>2</mn><mn>20</mn></msup></mfrac></math></p>

                <h3>Disk Usage</h3>
                <pre><code>df -H</code></pre>
                <p>Shows disk usage in human-readable format (base 1000).</p>

                <h3>Storage Analysis</h3>
                <pre><code>du -sh * | sort -hr | head -10</code></pre>
                <p>Top 10 largest directories in current path.</p>
            </article>

            <article class="command-block">
                <h3>System Uptime</h3>
                <pre><code>uptime</code></pre>
                <p>Shows uptime, users, and load averages.</p>

                <h3>Boot Time</h3>
                <pre><code>sysctl -n kern.boottime | awk '{print $4}' | sed 's/,//g' | xargs -I {} date -r {}</code></pre>
                <p>Shows exact boot time.</p>

                <h3>Temperature Sensors (Intel Macs)</h3>
                <pre><code>sudo powermetrics --samplers smc | grep -i temp</code></pre>
                <p>Shows CPU temperature. Updates every <data value="5">5 seconds</data>.</p>
            </article>
        </section>

        <!-- Network Commands -->
        <section class="command-category">
            <h2>Network Diagnostics & Configuration</h2>

            <article class="command-block">
                <h3>Network Interfaces</h3>
                <pre><code>ifconfig | grep "inet " | grep -v 127.0.0.1</code></pre>
                <p>Lists all IP addresses.</p>

                <h3>WiFi Information</h3>
                <pre><code>/System/Library/PrivateFrameworks/Apple80211.framework/Versions/A/Resources/airport -I</code></pre>
                <p>Shows current WiFi connection details.</p>

                <h3>Network Service Order</h3>
                <pre><code>networksetup -listnetworkserviceorder</code></pre>
                <p>Lists network services priority.</p>

                <h3>DNS Servers</h3>
                <pre><code>scutil --dns | grep nameserver | sort -u</code></pre>
                <p>Shows configured DNS servers.</p>

                <h3>Flush DNS Cache</h3>
                <pre><code>sudo dscacheutil -flushcache && sudo killall -HUP mDNSResponder</code></pre>
                <p>Clears DNS cache. Requires admin password.</p>

                <h3>Active Connections</h3>
                <pre><code>netstat -an | grep ESTABLISHED</code></pre>
                <p>Shows established network connections.</p>

                <h3>Port Listening</h3>
                <pre><code>lsof -iTCP -sTCP:LISTEN -P -n</code></pre>
                <p>Lists all listening TCP ports.</p>

                <h3>Find Process Using Port</h3>
                <pre><code>lsof -i :8080</code></pre>
                <p>Shows process using port <data value="8080">8080</data>.</p>

                <h3>Network Speed Test</h3>
                <pre><code>networkQuality -v</code></pre>
                <p>Tests network quality (macOS 12+). Duration: <data value="20">20 seconds</data>.</p>

                <h3>Route Table</h3>
                <pre><code>netstat -nr</code></pre>
                <p>Shows routing table.</p>
            </article>
        </section>

        <!-- Process Management -->
        <section class="command-category">
            <h2>Process & Service Management</h2>

            <article class="command-block">
                <h3>Top Processes by CPU</h3>
                <pre><code>ps aux | sort -nrk 3,3 | head -10</code></pre>
                <p>Shows top 10 CPU consuming processes.</p>

                <h3>Top Processes by Memory</h3>
                <pre><code>ps aux | sort -nrk 4,4 | head -10</code></pre>
                <p>Shows top 10 memory consuming processes.</p>

                <h3>Kill Process by Name</h3>
                <pre><code>pkill -f "Chrome"</code></pre>
                <p>Terminates all Chrome processes.</p>

                <h3>Kill Process on Port</h3>
                <pre><code>kill -9 $(lsof -ti:3000)</code></pre>
                <p>Kills process using port <data value="3000">3000</data>.</p>

                <h3>List Launch Daemons</h3>
                <pre><code>launchctl list | grep -v "com.apple"</code></pre>
                <p>Shows non-Apple launch agents/daemons.</p>

                <h3>Service Status</h3>
                <pre><code>launchctl print system | grep -A 1 "state ="</code></pre>
                <p>Shows launchd system state.</p>
            </article>
        </section>

        <!-- File System Operations -->
        <section class="command-category">
            <h2>File System & Permissions</h2>

            <article class="command-block">
                <h3>Find Large Files</h3>
                <pre><code>find / -type f -size +100M 2>/dev/null | head -20</code></pre>
                <p>Finds files larger than <data value="100">100 MB</data>.</p>

                <h3>Recently Modified Files</h3>
                <pre><code>find . -type f -mtime -1 -ls</code></pre>
                <p>Files modified in last <data value="24">24 hours</data>.</p>

                <h3>File Permissions</h3>
                <pre><code>ls -l@ filename</code></pre>
                <p>Shows permissions and extended attributes.</p>

                <h3>ACL Permissions</h3>
                <pre><code>ls -le filename</code></pre>
                <p>Shows Access Control Lists.</p>

                <h3>Disk I/O Statistics</h3>
                <pre><code>iostat -w 1</code></pre>
                <p>Shows disk I/O every <data value="1">1 second</data>.</p>

                <h3>Open Files by Process</h3>
                <pre><code>lsof -p $(pgrep Safari | head -1)</code></pre>
                <p>Lists files opened by Safari.</p>
            </article>
        </section>

        <!-- Security & User Management -->
        <section class="command-category">
            <h2>Security & User Information</h2>

            <article class="command-block">
                <h3>Current User Info</h3>
                <pre><code>id && groups</code></pre>
                <p>Shows user ID and group memberships.</p>

                <h3>List All Users</h3>
                <pre><code>dscl . -list /Users | grep -v '^_'</code></pre>
                <p>Lists non-system users.</p>

                <h3>User Login History</h3>
                <pre><code>last -10</code></pre>
                <p>Shows last <data value="10">10 logins</data>.</p>

                <h3>Firewall Status</h3>
                <pre><code>sudo /usr/libexec/ApplicationFirewall/socketfilterfw --getglobalstate</code></pre>
                <p>Shows firewall status.</p>

                <h3>SIP Status</h3>
                <pre><code>csrutil status</code></pre>
                <p>System Integrity Protection status.</p>

                <h3>Gatekeeper Status</h3>
                <pre><code>spctl --status</code></pre>
                <p>Shows Gatekeeper security status.</p>

                <h3>View Keychain</h3>
                <pre><code>security list-keychains</code></pre>
                <p>Lists available keychains.</p>
            </article>
        </section>

        <!-- Development & Server Commands -->
        <section class="command-category">
            <h2>Development & Web Server</h2>

            <article class="command-block">
                <h3>Start Python Web Server</h3>
                <pre><code>python3 -m http.server 8000</code></pre>
                <p>Serves current directory on port <data value="8000">8000</data>. Access at http://localhost:8000</p>

                <h3>Python Server with Custom Directory</h3>
                <pre><code>python3 -m http.server 8000 --directory /path/to/dir</code></pre>
                <p>Serves specific directory.</p>

                <h3>Simple PHP Server</h3>
                <pre><code>php -S localhost:8080</code></pre>
                <p>Starts PHP development server.</p>

                <h3>Ruby Web Server</h3>
                <pre><code>ruby -run -e httpd . -p 9090</code></pre>
                <p>Serves files on port <data value="9090">9090</data>.</p>

                <h3>Node.js Server (if npx available)</h3>
                <pre><code>npx http-server -p 3000</code></pre>
                <p>Uses Node.js to serve files.</p>

                <h3>Check Port Availability</h3>
                <pre><code>nc -z localhost 8000 && echo "Port in use" || echo "Port available"</code></pre>
                <p>Tests if port is available.</p>
            </article>
        </section>

        <!-- System Monitoring -->
        <aside class="pro-tip">
            <h3>Performance Monitoring</h3>
            <p>Real-time system monitor:</p>
            <pre><code>top -o cpu -s 2</code></pre>
            <p>Updates every <data value="2">2 seconds</data>, sorted by CPU usage.</p>
            <p>Memory pressure:</p>
            <pre><code>memory_pressure</code></pre>
            <p>Shows memory statistics and pressure.</p>
        </aside>

        <!-- Advanced Diagnostics -->
        <section class="command-category">
            <h2>Advanced System Diagnostics</h2>

            <article class="command-block">
                <h3>System Logs (Last Hour)</h3>
                <pre><code>log show --predicate 'eventMessage contains "error"' --last 1h</code></pre>
                <p>Shows error logs from last <data value="60">60 minutes</data>.</p>

                <h3>Kernel Extensions</h3>
                <pre><code>kextstat | grep -v com.apple</code></pre>
                <p>Lists non-Apple kernel extensions.</p>

                <h3>Battery Status (Laptops)</h3>
                <pre><code>pmset -g batt</code></pre>
                <p>Shows battery percentage and status.</p>

                <h3>Power Settings</h3>
                <pre><code>pmset -g</code></pre>
                <p>Displays all power management settings.</p>

                <h3>Hardware Diagnostics</h3>
                <pre><code>system_profiler SPUSBDataType SPThunderboltDataType</code></pre>
                <p>Lists USB and Thunderbolt devices.</p>

                <h3>Bluetooth Devices</h3>
                <pre><code>system_profiler SPBluetoothDataType</code></pre>
                <p>Shows Bluetooth configuration and devices.</p>

                <h3>Audio Devices</h3>
                <pre><code>system_profiler SPAudioDataType</code></pre>
                <p>Lists audio input/output devices.</p>
            </article>
        </section>

        <!-- Package Management -->
        <section class="command-category">
            <h2>Package Management (Homebrew)</h2>

            <article class="command-block">
                <h3>List Installed Packages</h3>
                <pre><code>brew list --formula</code></pre>
                <p>Shows installed Homebrew packages.</p>

                <h3>Outdated Packages</h3>
                <pre><code>brew outdated</code></pre>
                <p>Lists packages with available updates.</p>

                <h3>System Diagnosis</h3>
                <pre><code>brew doctor</code></pre>
                <p>Checks Homebrew installation health.</p>

                <h3>Cleanup Old Versions</h3>
                <pre><code>brew cleanup -n</code></pre>
                <p>Shows what would be cleaned (dry run).</p>
            </article>
        </section>

        <!-- Quick Math Reference -->
        <section class="math-reference">
            <h3>Storage Calculations</h3>
            <p>Binary units: <math><msup><mn>2</mn><mn>10</mn></msup><mo>=</mo><mn>1024</mn></math></p>
            <p>Decimal units: <math><msup><mn>10</mn><mn>3</mn></msup><mo>=</mo><mn>1000</mn></math></p>
            <p>Memory pages to MB: <math><mfrac><mrow><mi>pages</mi><mo>×</mo><mn>4096</mn></mrow><mrow><mn>1024</mn><mo>×</mo><mn>1024</mn></mrow></mfrac></math></p>
        </section>

        <!-- Statistics -->
        <section class="stats">
            <h3>Command Statistics</h3>
            <p>This page contains <data value="55">55+ commands</data> tested on macOS <data value="13">13 Ventura</data> and <data value="14">14 Sonoma</data>.</p>
            <p>Source: <cite>Apple Developer Documentation</cite>, <cite>BSD Manual Pages</cite>, and <cite>Homebrew Documentation</cite>.</p>
            <p>Average command execution time: <data value="50">50ms</data> to <data value="2000">2 seconds</data>.</p>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <p>&copy; 2024 Command Line Reference</p>
        <p>Last updated: <time datetime="2024-01-15T14:45:00">January 15, 2024 at 2:45 PM</time></p>
    </footer>
</body>
</html>